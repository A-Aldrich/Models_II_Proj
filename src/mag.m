function magnitude = mag(vec)
    magnitude = sqrt(sum(vec.^2));
end